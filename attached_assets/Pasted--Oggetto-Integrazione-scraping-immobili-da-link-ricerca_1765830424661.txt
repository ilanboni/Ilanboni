
Oggetto: Integrazione scraping immobili da link ricerca Immobiliare.it per matching automatico

Ciao team,
ho bisogno di una nuova funzione che si occupi di:

‚∏ª

‚úÖ Obiettivo

Quando un cliente ha salvato un link di ricerca da Immobiliare.it (es. "https://www.immobiliare.it/..."), voglio:
	1.	Effettuare lo scraping degli immobili mostrati da quella ricerca
	2.	Per ogni immobile:
	‚Ä¢	Uniformare alla nostra struttura (address, price, description, url, agencies, ecc.)
	‚Ä¢	Verificare se esiste gi√† in DB (tramite url)
	‚Ä¢	se esiste, sovrascrivere
	‚Ä¢	se nuovo, aggiungere
	‚Ä¢	Categorizzare come:
	‚Ä¢	privato ‚Üí se venduto solo da privati
	‚Ä¢	monocondiviso ‚Üí se venduto da una sola agenzia (anche con + link)
	‚Ä¢	pluricondiviso ‚Üí se ci sono pi√π agenzie diverse
	‚Ä¢	privato+agenzia ‚Üí se sia privato che almeno un‚Äôagenzia
	‚Ä¢	Se presente un numero privato, salvarlo in ownerPhone
	‚Ä¢	Associare l‚Äôimmobile al cliente come ‚Äúmatching da link‚Äù
	3.	Salvare i risultati per ogni cliente sotto client.matchingProperties

‚∏ª

üì• Dati gi√† disponibili
	‚Ä¢	Campo clients.searchLink (stringa) ‚Üí contiene link personalizzato della ricerca
	‚Ä¢	Il client ha gi√† rating (valutazione)
	‚Ä¢	√à gi√† presente storage.saveProperty e storage.getMatchingPropertiesForClient

‚∏ª

‚úÖ Cosa serve implementare
	1.	Nuova funzione scrapePropertiesFromSearchLink(client: Client)
‚Üí prende il link dal cliente, fa scraping, elabora gli immobili, li salva e aggiorna i matching
	2.	All‚Äôinterno:
	‚Ä¢	Chiamata a scraping con Playwright (o Cheerio se √® sufficiente)
	‚Ä¢	Matching automatico solo se il client ha rating 4 o 5
	‚Ä¢	Salvataggio nei matching con score (via calculateMatchScore() gi√† presente)
	3.	Notifiche aggiornamenti:
	‚Ä¢	Dopo l‚Äôimport, se ci sono nuovi matching, evidenziare nel backend
	‚Ä¢	Mostrare in dashboard immobili associati tramite questo processo

‚∏ª

üß† Bonus (gi√† fatto o utile da avere)
	‚Ä¢	‚úÖ Sovrascrittura automatica se url esiste
	‚Ä¢	‚úÖ Salvataggio ownerPhone per privato / privato+agenzia
	‚Ä¢	‚úÖ Categorizzazione (privato, pluricondiviso, ecc.) gi√† gestita

‚∏ª

‚öôÔ∏è Esempio funzione (semplificato)

// server/services/searchLinkScraper.ts