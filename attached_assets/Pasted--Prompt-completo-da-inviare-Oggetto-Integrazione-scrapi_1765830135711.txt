âœ… Prompt completo da inviare

Oggetto: Integrazione scraping immobili da link ricerca Immobiliare.it per matching automatico

Ciao team,
ho bisogno di una nuova funzione che si occupi di:

â¸»

âœ… Obiettivo

Quando un cliente ha salvato un link di ricerca da Immobiliare.it (es. "https://www.immobiliare.it/..."), voglio:
	1.	Effettuare lo scraping degli immobili mostrati da quella ricerca
	2.	Per ogni immobile:
	â€¢	Uniformare alla nostra struttura (address, price, description, url, agencies, ecc.)
	â€¢	Verificare se esiste giÃ  in DB (tramite url)
	â€¢	se esiste, sovrascrivere
	â€¢	se nuovo, aggiungere
	â€¢	Categorizzare come:
	â€¢	privato â†’ se venduto solo da privati
	â€¢	monocondiviso â†’ se venduto da una sola agenzia (anche con + link)
	â€¢	pluricondiviso â†’ se ci sono piÃ¹ agenzie diverse
	â€¢	privato+agenzia â†’ se sia privato che almeno unâ€™agenzia
	â€¢	Se presente un numero privato, salvarlo in ownerPhone
	â€¢	Associare lâ€™immobile al cliente come â€œmatching da linkâ€
	3.	Salvare i risultati per ogni cliente sotto client.matchingProperties

â¸»

ğŸ“¥ Dati giÃ  disponibili
	â€¢	Campo clients.searchLink (stringa) â†’ contiene link personalizzato della ricerca
	â€¢	Il client ha giÃ  rating (valutazione)
	â€¢	Ãˆ giÃ  presente storage.saveProperty e storage.getMatchingPropertiesForClient

â¸»

âœ… Cosa serve implementare
	1.	Nuova funzione scrapePropertiesFromSearchLink(client: Client)
â†’ prende il link dal cliente, fa scraping, elabora gli immobili, li salva e aggiorna i matching
	2.	Allâ€™interno:
	â€¢	Chiamata a scraping con Playwright (o Cheerio se Ã¨ sufficiente)
	â€¢	Matching automatico solo se il client ha rating 4 o 5
	â€¢	Salvataggio nei matching con score (via calculateMatchScore() giÃ  presente)
	3.	Notifiche aggiornamenti:
	â€¢	Dopo lâ€™import, se ci sono nuovi matching, evidenziare nel backend
	â€¢	Mostrare in dashboard immobili associati tramite questo processo

â¸»

ğŸ§  Bonus (giÃ  fatto o utile da avere)
	â€¢	âœ… Sovrascrittura automatica se url esiste
	â€¢	âœ… Salvataggio ownerPhone per privato / privato+agenzia
	â€¢	âœ… Categorizzazione (privato, pluricondiviso, ecc.) giÃ  gestita

â¸»

âš™ï¸ Esempio funzione (semplificato)

// server/services/searchLinkScraper.ts